<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>新闻</title>
    <link href="./css/news.css" rel="stylesheet" type="text/css"/>
    <link href="./css/common.css" rel="stylesheet" type="text/css"/>
    <script src='./js/common.js' type="text/javascript" charset="utf-8"></script>
    <script src='./js/request.js' type="text/javascript" charset="utf-8"></script>
</head>
<body>
    <header>
        <iframe src="./header.html" frameborder='0' seamless width="100%" height="70px" scrolling='no' ></iframe>
    </header>
    <article class="news-content">
        <div class="title-block">
            <span></span>
            <span>最新动态</span>
        </div>
        <div class="main-content">
            <div class="cont-box">
                <div>
                    <img data-src="./img/thunder.jpg" alt="" />
                </div>
                <div>
                    <h4>蚁人即将上线影院震撼来袭</h4>
                    <time>发布日期：&nbsp;&nbsp;2021-9-7</time>
                    <p>
                        《蚁人2:黄蜂女现身》马上就要在国内上映了，这是今年以来继《黑豹》和《复仇者联盟3》之后又一部漫威电影，漫威今年高产又高质量，相信这部电影也值得一看！
                    </p>
                </div>
            </div>
            <div class="cont-box">
                <div>
                    <img data-src="./img/thunder.jpg" alt="" />
                </div>
                <div>
                    <h4>蚁人即将上线影院震撼来袭</h4>
                    <time>发布日期：&nbsp;&nbsp;2021-9-7</time>
                    <p>
                        《蚁人2:黄蜂女现身》马上就要在国内上映了，这是今年以来继《黑豹》和《复仇者联盟3》之后又一部漫威电影，漫威今年高产又高质量，相信这部电影也值得一看！
                    </p>
                </div>
            </div>
            <div class="cont-box">
                <div>
                    <img data-src="./img/thunder.jpg" alt="" />
                </div>
                <div>
                    <h4>蚁人即将上线影院震撼来袭</h4>
                    <time>发布日期：&nbsp;&nbsp;2021-9-7</time>
                    <p>
                        《蚁人2:黄蜂女现身》马上就要在国内上映了，这是今年以来继《黑豹》和《复仇者联盟3》之后又一部漫威电影，漫威今年高产又高质量，相信这部电影也值得一看！
                    </p>
                </div>
            </div>
            <div class="cont-box">
                <div>
                    <img data-src="./img/thunder.jpg" alt="" />
                </div>
                <div>
                    <h4>蚁人即将上线影院震撼来袭</h4>
                    <time>发布日期：&nbsp;&nbsp;2021-9-7</time>
                    <p>
                        《蚁人2:黄蜂女现身》马上就要在国内上映了，这是今年以来继《黑豹》和《复仇者联盟3》之后又一部漫威电影，漫威今年高产又高质量，相信这部电影也值得一看！
                    </p>
                </div>
            </div>
            <div class="cont-box">
                <div>
                    <img data-src="./img/thunder.jpg" alt="" />
                </div>
                <div>
                    <h4>蚁人即将上线影院震撼来袭</h4>
                    <time>发布日期：&nbsp;&nbsp;2021-9-7</time>
                    <p>
                        《蚁人2:黄蜂女现身》马上就要在国内上映了，这是今年以来继《黑豹》和《复仇者联盟3》之后又一部漫威电影，漫威今年高产又高质量，相信这部电影也值得一看！
                    </p>
                </div>
            </div>
            <div class="cont-box">
                <div>
                    <img data-src="./img/thunder.jpg" alt="" />
                </div>
                <div>
                    <h4>蚁人即将上线影院震撼来袭</h4>
                    <time>发布日期：&nbsp;&nbsp;2021-9-7</time>
                    <p>
                        《蚁人2:黄蜂女现身》马上就要在国内上映了，这是今年以来继《黑豹》和《复仇者联盟3》之后又一部漫威电影，漫威今年高产又高质量，相信这部电影也值得一看！
                    </p>
                </div>
            </div>
            <div class="cont-box">
                <div>
                    <img data-src="./img/thunder.jpg" alt="" />
                </div>
                <div>
                    <h4>蚁人即将上线影院震撼来袭</h4>
                    <time>发布日期：&nbsp;&nbsp;2021-9-7</time>
                    <p>
                        《蚁人2:黄蜂女现身》马上就要在国内上映了，这是今年以来继《黑豹》和《复仇者联盟3》之后又一部漫威电影，漫威今年高产又高质量，相信这部电影也值得一看！
                    </p>
                </div>
            </div>
            <div class="cont-box">
                <div>
                    <img data-src="./img/thunder.jpg" alt="" />
                </div>
                <div>
                    <h4>蚁人即将上线影院震撼来袭</h4>
                    <time>发布日期：&nbsp;&nbsp;2021-9-7</time>
                    <p>
                        《蚁人2:黄蜂女现身》马上就要在国内上映了，这是今年以来继《黑豹》和《复仇者联盟3》之后又一部漫威电影，漫威今年高产又高质量，相信这部电影也值得一看！
                    </p>
                </div>
            </div>
        </div>
        <div class="page-box">
            <span class="active">1</span>
            <span>2</span>
            <span>3</span>
        </div>
    </article>
    <footer>
        <iframe src="./footer.html" frameborder='0' width="100%" height="350px" ></iframe>
    </footer>
    <script>
        let list = []
        document.querySelector('.main-content').addEventListener('click', (e)=>{
            let init = ['H4', 'IMG', 'P']
            if(e.target && init.some(opt=> opt === e.target.nodeName)) window.location.href = './detail.html'
        })
        lazyload();
        document.addEventListener('scroll', lazyload, false);
        function changePage (num){
            num = Number(num) - 1
            let start = num ? ( (num - 1) * 8) : 0, end = num * 8,
                init = list.slice(start, end)
            document.querySelectorAll('.cont-box img').forEach((opt, i)=>{
                if(!num){
                    opt.src = './img/thunder.jpg'
                }else{
                    opt.src=init[i].owner.avatar_url
                }
            })
        }
        function checkedItem (){
            document.querySelectorAll('.page-box span').forEach(opt=> opt.classList.remove('active'))
        }
        function send(page = 1){
            let url = `https://api.github.com/search/repositories?q=stars:3E1+language:javascript&sort=stars&order=desc&type=Repositories&page=${page}`
            request(url).then(data=>{
                list = data.items.slice(0, 16)
            })
            document.querySelector('.page-box').addEventListener('click', (e)=>{
                const { nodeName, innerText } = e.target
                if(nodeName === 'SPAN'){
                    changePage(Number(innerText))
                    checkedItem()
                    e.target.classList.add('active')
                }
            })
        }
        window.addEventListener('DOMContentLoaded', ()=>{
            send()
        })
    </script>
</body>
</html>